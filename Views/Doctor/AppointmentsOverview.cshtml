@model IEnumerable<EHRMvcCleanDemo.Models.DoctorAppointmentSummaryDTO>

@{
    ViewData["Title"] = "Doctor Appointments Overview";
}

<!--
    HIPAA COMPLIANCE NOTICE:
    This view is HIPAA-SAFE because:
    1. NO patient names or personally identifiable information (PII) is displayed
    2. Only aggregate statistics (appointment counts) are shown
    3. Only appointment dates are displayed (no patient-specific details like reason for visit)
    4. Follows the "minimum necessary" principle - displays only what's needed for scheduling
    5. No Protected Health Information (PHI) is exposed
-->

<div class="container mt-4">
    <h2>Doctor Appointments Overview</h2>
    <p class="text-muted">Summary of active doctors and their appointment workload</p>

    @if (Model == null || !Model.Any())
    {
        <div class="alert alert-info">
            No active doctors found in the system.
        </div>
    }
    else
    {
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Doctor Name</th>
                    <th>Specialty</th>
                    <th>Total Appointments</th>
                    <th>Next Appointment</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var doctor in Model)
                {
                    <tr>
                        <td>
                            <strong>@doctor.FullName</strong>
                        </td>
                        <td>@doctor.Specialty</td>
                        <td>
                            @if (doctor.TotalAppointments == 0)
                            {
                                <span class="badge bg-secondary">0</span>
                            }
                            else
                            {
                                <span class="badge bg-primary">@doctor.TotalAppointments</span>
                            }
                        </td>
                        <td>
                            @if (doctor.NextAppointmentDate.HasValue)
                            {
                                <span class="text-success">
                                    @doctor.NextAppointmentDate.Value.ToString("MMM dd, yyyy")
                                </span>
                            }
                            else
                            {
                                <span class="text-muted">No upcoming appointments</span>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="mt-3">
            <small class="text-muted">
                <strong>Note:</strong> This view displays only summary information for scheduling purposes.
                Patient information is protected and not displayed.
            </small>
        </div>
    }
</div>
